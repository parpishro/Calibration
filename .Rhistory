summary(cal1)
cal2    <- calibrate(sim = Ds2, field = Df2, Nmcmc = 20, nBurn = 0, thinning = 1)
summary(cal2)
plot(cal1)
cal1$cache$q
cal1$cache$p
cal2$cache$p
cal4$cache$p
cal2$cache$p
cal2$cache$n
cal2$cache$m
cal1$cache$m
load_all()
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
plot(cal1)
cal2    <- calibrate(sim = Ds2, field = Df2, Nmcmc = 20, nBurn = 0, thinning = 1)
summary(cal2)
plot(cal2)
cal1$cache$m
View(cal1)
load_all()
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
cal2    <- calibrate(sim = Ds2, field = Df2, Nmcmc = 20, nBurn = 0, thinning = 1)
summary(cal2)
plot(cal1)
View(cal1)
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
View(cal1)
View(cache)
load_all()
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
View(cache)
cal2    <- calibrate(sim = Ds2, field = Df2, Nmcmc = 20, nBurn = 0, thinning = 1)
summary(cal2)
View(cal2)
View(cal1)
load_all()
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
View(cache)
View(cal1)
load_all()
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
class(cal1$cache$sdRates)
typeof(cal1$cache$sdRates)
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
plot(cal1)
load_all()
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
summary(cal1)
View(cal1)
plot(cal1)
load_all()
plot(cal1)
View(cache)
par(mfrow = c(1, 2))
plot(cal1, parameter = "thetaS")
# plot the trace of MCMC draws (useful to determine convergence and stationarity)
par(mfrow = c(1, 2))
plot(cal1, parameter = "alphaS", type = "trace")
plot(cal1, type = "fits")
load_all()
plot(cal1, type = "fits")
load_all()
plot(cal1, type = "fits")
load_all()
plot(cal1, type = "fits")
load_all()
plot(cal1, type = "fits")
load_all()
plot(cal1, type = "fits")
paste0("x", 1:ncol(cal1$data$Xf))
length("x1") != ncol(obj$data$Xf)
length("x1") != ncol(cal1$data$Xf)
length("x1")
load_all()
plot(cal1, type = "fits")
par(mfrow = c(1))
par(mfrow = c(1, 1))
plot(cal1, type = "fits")
plot(cal1)
plot(cal1, type = "fits")
cal2    <- calibrate(sim = Ds2, field = Df2, Nmcmc = 20, nBurn = 0, thinning = 1)
plot(cal2)
typeof(cal1$data)
typeof(cal1$scale)
typeof(cal1$indices)
typeof(cal1$priorFns)
typeof(cal1$proposalSD)
load_all()
use_test("plot.fbc.R")
tryCatch(stop(e), error = function(e) e, finally = print("Hello"))
load_all()
tryCatch(1, 4)
tryCatch(1, print(4))
tryCatch(0, print(4))
tryCatch(0, finally = print(4))
a <- tryCatch(0, finally = print(4))
a
a <- tryCatch(1, finally = print(4))
a
load_all()
tryCatch(plot(cal))
tryCatch(plot(cal1))
a <- tryCatch(plot(cal1))
a
load_all()
a <- tryCatch(plot(cal1))
a
try(plot(cal1))
a <- try(plot(cal1))
a
class(a)
load_all()
use_test("summary.fbc.R")
load_all()
s <- set_hyperPriors()
typeof(s$thetaS$init)
1 == 2-1 == 7-6
use_test("set_hyperPriors")
load_all()
set_hyperPriors()
load_all()
set_hyperPriors()
load_all()
set_hyperPriors()
use_test("prior_builder")
load_all()
cal1 <- calibrate(sim=Ds1, field = Df1, Nmcmc=10, nBurn=0, thinning = 1)
cal1$estimates
cal1$acceptance
cal1 <- calibrate(sim=Ds1, field = Df1, Nmcmc=10, nBurn=0, thinning = 1)
cal1$estimates
sum(cal$estimates[, 8] <= 0)
sum(cal1$estimates[, 8] <= 0)
load_all()
s <- set_hyperPriors(alphaS = list(dist = "fixed", init = 2))
load_all()
s <- set_hyperPriors(alphaS = list(dist = "fixed", init = 2))
load_all()
s <- set_hyperPriors(alphaS = list(dist = "fixed", init = 2))
s <- set_hyperPriors(alphaS = list(dist = "fixed", init = 2, p1 = 1, p2 = 1))
cal1 <- calibrate(sim=Ds1, field = Df1, Nmcmc=10, nBurn=0, thinning = 1, hypers = s)
cal1$estimates
load_all()
s <- set_hyperPriors(alphaSDist = "fixed", alphaSInit = 2))
s <- set_hyperPriors(alphaSDist = "fixed", alphaSInit = 2)
cal1 <- calibrate(sim=Ds1, field = Df1, Nmcmc=10, nBurn=0, thinning = 1, hypers = s)
load_all()
library(testthat)
# This file is part of the standard setup for testthat.
# It is recommended that you do not modify it.
#
# Where should you do additional test configuration?
# Learn more about the roles of various files in:
# * https://r-pkgs.org/tests.html
# * https://testthat.r-lib.org/reference/test_package.html#special-files
library(testthat)
library(FBC)
test_check("FBC")
load_all()
k <- c(2, 2, 2, 2, 2, 2, 2)
sd(k)
cal1$estimates
load_all()
cal1$acceptance
load_all()
cal <- calibrate(sim = Ds2, field = Df2, Nmcmc = 15, nBurn = 0, thinning = 1,
kappa = list(dist = c("beta", "uniform"),
init = c(0.5, 0.3),
p1   = c(1.1, 0),
p2   = c(1.1, 1)))
cal <- calibrate(sim = Ds2, field = Df2, Nmcmc = 15, nBurn = 0, thinning = 1,
kappa = list(dist = c("beta", "uniform"),
init = c(0.5, 0.3),
p1   = c(1.1, 0),
p2   = c(1.1, 1)))
load_all()
cal <- calibrate(sim = Ds2, field = Df2, Nmcmc = 15, nBurn = 0, thinning = 1,
kappa = list(dist = c("beta", "uniform"),
init = c(0.5, 0.3),
p1   = c(1.1, 0),
p2   = c(1.1, 1)))
plot(cal)
cal <- calibrate(sim = Ds2, field = Df2, Nmcmc = 15, nBurn = 0, thinning = 1,
kappa = list(dist = c("beta", "uniform"),
init = c(0.5, 0.3),
p1   = c(1.1, 0),
p2   = c(1.1, 1)))
cal$estimates
load_all()
priorFns         <- c(priorFns, prior_builder(prior =  dist[j], p1 = p1[j], p2 = p2[j]))
library(FBC)
replicate(2, prior_builder("uniform", p1 = 0, p2 = 1)
f <- replicate(2, prior_builder("uniform", p1 = 0, p2 = 1)
f <- replicate(2, prior_builder("uniform", p1 = 0, p2 = 1))
f[1](0.5)
f[[1]](0.5)
f[[1]](1)
f[[1]](12)
f <- prior_builder("uniform", p1 = 0, p2 = 1)
f(0.5)
exp(f(0.5))
exp(f(0.75))
exp(f(1.75))
library(devtools)
library(FBC)
kappa = list(dist = c("beta", "uniform"),
cal <- calibrate(sim = Ds2, field = Df2, Nmcmc = 15, nBurn = 0, thinning = 1,
kappa = list(dist = c("beta", "uniform"),
init = c(0.5, 0.3),
p1   = c(1.1, 0),
p2   = c(1.1, 1)))
plot(cal)
l <- c(1.1, 4)
l[1]
l[[1]]
pr  <- set_hyperPriors(alphaSDist = "fixed", alphaSInit = 2)
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 10, nBurn = 0, thinning = 1, hypers = pr)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 50, nBurn = 0, thinning = 1)
load_all()
cal <- calibrate(sim = Ds1, field = Df1, Nmcmc = 50, nBurn = 0, thinning = 1)
# build a simple calibration model
cal1    <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
kappa = list(dist = "gaussian", init = 0.5, p1 = 0.5, p2 = 0.25))
preds <- predict(cal1, newdata = matrix(Df1[,2], ncol = 1))
preds$pred
cal2   <- calibrate(sim = Ds2, field = Df2, Nmcmc = 10, nBurn = 0, thinning = 1)
predsB <- predict(cal2, newdata = Df2[, 2:3], type = "Bayesian")
predsB$pred
predsB$se
predsM <- predict(cal2, newdata = Df2[, 2:3], type = "MAP")
predsM$pred
predsM$se
pr1   <- set_hyperPriors(sigma2SDist = "jeffreys")
cal1  <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
hypers = pr1)
cal$estimates
pr2   <- set_hyperPriors(alphaSDist = c("gamma", "beta"),
alphaSP1 = c(1, 2),
alphaBP2 = c(2, 4))
traceback()
load_all()
pr2   <- set_hyperPriors(alphaSDist = c("gamma", "beta"),
alphaSP1 = c(1, 2),
alphaBP2 = c(2, 4))
pr2   <- set_hyperPriors(alphaSDist = c("gamma", "beta"),
alphaSP1 = c(1, 2),
alphaBP2 = c(2, 4))
load_all()
pr2   <- set_hyperPriors(alphaSDist = c("gamma", "beta"),
alphaSP1 = c(1, 2),
alphaBP2 = c(2, 4))
c("gamma", "beta") %in% c("uniform", "gaussian", "gamma", "beta", "lognormal", "logistic",
"betashift", "exponential", "inversegamma", "jeffreys", "fixed")
!(c("gamma", "beta") %in% c("uniform", "gaussian", "gamma", "beta", "lognormal", "logistic",
"betashift", "exponential", "inversegamma", "jeffreys", "fixed"))
sum(!(c("gamma", "beta") %in% c("uniform", "gaussian", "gamma", "beta", "lognormal", "logistic",
"betashift", "exponential", "inversegamma", "jeffreys", "fixed")))
is.double(c(1, 2))
load_all()
pr2   <- set_hyperPriors(alphaSDist = c("gamma", "beta"),
alphaSP1 = c(1, 2),
alphaBP2 = c(2, 4))
pr2   <- set_hyperPriors(alphaSDist = c("gamma", "beta"),
alphaSP1 = c(1, 2),
alphaSP2 = c(2, 4))
cal2  <- calibrate(sim = Ds1, field = Df1,
Nmcmc = 5, nBurn = 0, thinning = 1,
hypers = pr2)
load_all()
document()
load_all()
document()
load_all()
document()
load_all()
document()
load_all()
document()
load_all()
document()
load_all()
use_vignette("fbc")
load_all()
usethis::use_github_action_check_standard()
use_github_actions_badge(name = "R-CMD-check.yaml", repo_spec = NULL)
use_github_action_check_standard()
add_github_actions_codecov()
install.packages("rcompendium")
library(rcompendium)
add_github_actions_codecov()
add_codecov_badge()
add_cran_badge()
add_dependencies_badge()
, add_github_actions_check_badge()
add_github_actions_check_badge()
add_github_actions_pkgdown_badge()
add_license_badge()
add_lifecycle_badge()
add_repostatus_badge()
use_coverage(pkg = ".", type = c("codecov"))
library(devtools)
use_coverage(type = c("codecov"))
---
title: "FBC: Full Bayesian Calibration"
knitr::opts_chunk$set(
collapse = TRUE,
comment = ">"
)
options(width = 100)
library(FBC)
head(ballField, 3)
dim(ballField)
head(ballSim, 3)
dim(ballSim)
plot(ballField[, 2], ballField[, 1], cex = 0.65, pch = 19, col = "red", ylim = c(0, 1.5),
xlab="Height (m)", ylab="Time (s)")
points(ballSim[, 2], ballSim[, 1], cex = 0.65, pch = 19, col = "blue")
legend("topleft", legend = c("Simulation", "Field"),
col = c("blue", "red"), pch = 16, cex = 0.8)
library(devtools)
load_all()
output <- calibrate(sim = ballSim, field = ballField,                                 # Data
Nmcmc = 11000, nBurn = 1000, thinning = 50,                       # MCMC
kappaDist = "beta", kappaInit = NA, kappaP1 = 1.1, kappaP2 = 1.1, # Priors
hypers = set_hyperPriors(),
showProgress = FALSE)
save(output, "/inst/output.rda")
save(output, file="/inst/output.rda")
save(output, file="inst/output.rda")
load(".../inst/output.rda")
load("inst/output.rda")
output_path <- system.file("output.rda", package = "FBC")
load(output_path)
output_path <- system.file("output.rda", package = "FBC")
load(output_path)
names(output)
knitr::opts_chunk$set(
collapse = TRUE,
comment = ">"
)
library(FBC)
head(ballField, 3)
dim(ballField)
head(ballSim, 3)
dim(ballSim)
plot(ballField[, 2], ballField[, 1], cex = 0.65, pch = 19, col = "red", ylim = c(0, 1.5),
xlab = "Height (m)", ylab = "Time (s)")
points(ballSim[, 2], ballSim[, 1], cex = 0.65, pch = 19, col = "blue")
legend("topleft", legend = c("Simulation", "Field"),
col = c("blue", "red"), pch = 16, cex = 0.8)
title(main = "Figure 1: Ball Drop Experiments", adj = 0)
priors <- set_hyperPriors(thetaSDist = "beta", thetaBP2 = 6)
output_path <- system.file("output.rda", package = "FBC")
load(output_path)
load_all()
output_path <- system.file("output.rda", package = "FBC", mustWork = TRUE)
load(output_path)
library(FBC)
vignette("FBC")
vignette("fbc")
vignette("fbc", package = "FBC")
library(FBC)
vignette("fbc", package = "FBC")
vignette("fbc.rmd", package = "FBC")
load_all()
vignette("fbc", package = "FBC")
vignetteInfo(package = "FBC")
vignette("fbc", package = "FBC")
knitr::knit("vignettes/fbc.Rmd")
load_all()
vignette("fbc", package = "FBC")
library(usethis)
library(devtools)
load_all()
use_vignette("fbc-vignette")
load_all()
install()
vignette("fbc")
library(FBC)
library("FBC")
vignette("FBC")
library(rmarkdown)
document()
vignette(fbc)
vignette("fbc")
load_all()
library(FBC)
vignette("fbc")
vignetteInfo(package = "FBC")
predsMAP <- predict(object = output, newdata = matrix(c(2.2, 2.4), ncol = 1), method = "MAP")
predsMAP
predsBayes <- predict(object = output, newdata = matrix(c(2.2, 2.4), ncol = 1), method = "Bayesian")
predsBayes
predsMAP
predsBayes
load_all()
check()
library(usethis)
library(devtools)
load_all()
use_gpl_license()
use_mit_license(copyright_holder = "Parham Pishrobat")
use_gpl_license(version = 2)
?calibrate
load_all()
document()
install()
library(testthat)
# This file is part of the standard setup for testthat.
# It is recommended that you do not modify it.
#
# Where should you do additional test configuration?
# Learn more about the roles of various files in:
# * https://r-pkgs.org/tests.html
# * https://testthat.r-lib.org/reference/test_package.html#special-files
library(testthat)
library(FBC)
test_check("FBC")
use_testthat()
test()
load_all()
check()
library(FBC)
check()
use_devtools()
dev_sitrep()
update_packages("devtools")
update_packages("FBC")
install_dev_deps()
dev_sitrep()
.libPaths()
lapply(.libPaths(), list.dirs, recursive = FALSE, full.names = FALSE)
R_LIBS_USER
Sys.getenv("R_LIBS_USER")
F2
proj_sitrep()
X     <- matrix(c(1, 3, 5,
2, 2, 6,
1, 4, 1), nrow = 3, byrow = TRUE)
Y     <- matrix(c(7, 3, 0,
2, 2, 4), nrow = 2, byrow = TRUE)
sc    <- c(1, 2, 3) # scale parameters of correlation structure
sm    <- c(2, 1, 2) # smoothness parameters of correlation structure
# correlation of a matrix with itself
correlation(X, theta = sc, alpha = sm)
summary(output)
print(output)
summary(output) # print(output) has exactly the same output
par()
par(mfrow)
